<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SCL-90 症状自评量表 (图表版)</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
        }
        /* Custom focus style for accessibility */
        input[type="radio"]:focus-visible {
            outline: 2px solid #3b82f6;
            outline-offset: 2px;
        }
    </style>
</head>
<body class="bg-gray-50 text-gray-800">

    <div class="container mx-auto max-w-3xl p-4 sm:p-6 md:p-8">
        
        <header class="bg-white p-6 rounded-xl shadow-sm mb-6 border border-gray-200">
            <h1 class="text-2xl sm:text-3xl font-bold text-gray-900 mb-2">SCL-90 症状自评量表</h1>
            <p class="text-gray-600"><strong>指导语：</strong>请仔细阅读以下每一条问题，并根据您在<strong>最近一星期内</strong>的实际感觉，选择最符合您情况的选项。请确保完成所有题目。</p>
        </header>

        <div class="bg-white p-6 rounded-xl shadow-sm mb-6 border border-gray-200">
            <h2 class="text-xl font-semibold text-gray-800 mb-3">评分标准</h2>
            <ul class="list-none space-y-2 text-gray-600">
                <li><span class="font-semibold text-blue-600">1 (没有):</span> 自觉完全没有该项症状。</li>
                <li><span class="font-semibold text-green-600">2 (很轻):</span> 自觉有该项症状，但影响轻微。</li>
                <li><span class="font-semibold text-yellow-600">3 (中度):</span> 自觉有该项症状，有一定影响。</li>
                <li><span class="font-semibold text-orange-600">4 (偏重):</span> 自觉常有该项症状，有相当程度的影响。</li>
                <li><span class="font-semibold text-red-600">5 (严重):</span> 自觉该症状的频度和强度都非常严重。</li>
            </ul>
        </div>

        <form id="scl90-form" class="space-y-4">
            <!-- Questions will be dynamically generated by JavaScript -->
        </form>
        
        <div id="alert-message" class="hidden bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded-lg relative my-6" role="alert">
            <strong class="font-bold">提示：</strong>
            <span class="block sm:inline">请完成所有90个问题后再提交。</span>
        </div>

        <button type="button" onclick="calculateResults()" class="w-full bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 px-4 rounded-lg text-lg transition-colors duration-300 focus:outline-none focus:ring-4 focus:ring-blue-300 mt-6">
            查看结果
        </button>

        <div id="results" class="hidden mt-8 bg-white p-6 rounded-xl shadow-sm border border-gray-200">
            <h2 class="text-2xl font-bold text-gray-900 mb-4 border-b pb-3">测试结果分析</h2>
            
            <div id="summary" class="space-y-6 mb-6"></div>

            <h3 class="text-xl font-bold text-gray-900 mb-4">因子分雷达图</h3>
            <div class="p-4 border rounded-lg bg-gray-50">
                <canvas id="resultsChart"></canvas>
            </div>

            <h3 class="text-xl font-bold text-gray-900 mt-8 mb-4">各项因子分详情与建议</h3>
            <div id="factor-scores" class="grid grid-cols-1 md:grid-cols-2 gap-4"></div>
             <p class="mt-8 text-sm text-gray-500 bg-yellow-50 border border-yellow-200 p-4 rounded-lg">
                <strong>重要声明：</strong> 本测试结果和建议仅供自我评估和参考，不能替代专业的心理诊断和治疗。如果您对结果感到担忧，或正在经历严重的心理困扰，请务必寻求专业心理咨询师或精神科医生的帮助。
            </p>
        </div>
    </div>

<script>
    // --- Global variable to hold the chart instance ---
    let myChart = null;

    const questions = [
        "1. 头痛。", "2. 神经过敏，感到不安。", "3. 头脑中有不必要的想法或字句盘旋。", "4. 头晕或昏倒。", "5. 对异性不感兴趣。", "6. 对别人感到不满。", "7. 感到有人在监视你。", "8. 感到别人对你的成绩没有作出恰当的评价。", "9. 难以忘记一些不愉快的事。", "10. 担心自己的衣饰整齐及仪态的优雅。", "11. 容易烦恼和激动。", "12. 胸痛。", "13. 害怕空旷的场所或街道。", "14. 感到自己的精力下降，活动减慢。", "15. 想结束自己的生命。", "16. 听到别人听不见的声音。", "17. 发抖。", "18. 感到大多数人都不可信任。", "19. 胃口不好。", "20. 容易哭泣。", "21. 对异性感到不自在。", "22. 感到孤单。", "23. 感到苦闷。", "24. 过分担忧。", "25. 对事物不感兴趣。", "26. 感到害怕。", "27. 你的感情容易受到伤害。", "28. 旁人能知道你的私下想法。", "29. 感到别人不理解你、不同情你。", "30. 感到人们对你不友好、不喜欢你。", "31. 做事必须做得很慢以保证做得正确。", "32. 心跳得很厉害。", "33. 恶心或胃部不舒服。", "34. 感到比不上他人。", "35. 肌肉酸痛。", "36. 感到有人在观察你、谈论你。", "37. 难以入睡。", "38. 做事必须反复检查。", "39. 难以作出决定。", "40. 害怕乘电车、公共汽车、地铁或火车。", "41. 呼吸有困难。", "42. 一阵阵发冷或发热。", "43. 因为感到害怕而避开某些东西、场合或活动。", "44. 脑子变空了。", "45. 身体发麻或刺痛。", "46. 喉咙有梗塞感。", "47. 感到前途没有希望。", "48. 不能集中注意力。", "49. 感到身体的某一部分无力。", "50. 感到紧张、被牵扯着。", "51. 感到手或脚发重。", "52. 想到死亡的事。", "53. 吃得太多。", "54. 当别人看着你或谈论你时感到不自在。", "55. 有一些不属于你自己的想法。", "56. 有想打人或伤害他人的冲动。", "57. 醒得太早。", "58. 必须重复某些动作，例如反复洗手、点数。", "59. 睡得不稳不深。", "60. 有想摔东西或破坏东西的冲动。", "61. 有一些别人没有的奇怪想法。", "62. 感到对别人神经过敏。", "63. 在商店或电影院等人多的地方感到不自在。", "64. 感到任何事情都很困难。", "65. 害怕在公共场合昏倒。", "66. 感到别人想占你的便宜。", "67. 为一些有关“性”的想法而很苦恼。", "68. 你认为应该因为自己的过错而受到惩罚。", "69. 感到要很快地把事情做完。", "70. 感到自己的身体有严重问题。", "71. 从未感到和其他人很亲近。", "72. 感到自己有罪。", "73. 感到自己的脑子有毛病。", "74. 感到害羞。", "75. 在公共场合中说话时，感到害怕。", "76. 感到别人会控制你的思想。", "77. 感到别人对你应负的责任过分信赖。", "78. 对自己的身体外形感到担忧。", "79. 感到无助。", "80. 感到苦恼。", "81. 感到事情没有价值，没有意义。", "82. 感到坐立不安、无法静坐。", "83. 感到自己“精神崩溃”了。", "84. 感到即使和别人在一起也孤单。", "85. 感到自己做什么事都很有劲。", "86. 感到一切都成为负担。", "87. 感到对将来没有盼头。", "88. 感到自己有“神经质”。", "89. 感到自己被人控制或影响。", "90. 感到自己的脑子出了问题。"
    ];

    const form = document.getElementById('scl90-form');
    questions.forEach((q, index) => {
        const questionDiv = document.createElement('div');
        questionDiv.className = 'question-group bg-white p-5 rounded-xl shadow-sm border border-gray-200';
        questionDiv.innerHTML = `
            <label class="font-semibold text-gray-800 block mb-4">${q}</label>
            <div class="options grid grid-cols-2 sm:grid-cols-3 md:grid-cols-5 gap-3">
                <label class="flex items-center p-3 border rounded-lg cursor-pointer hover:bg-gray-100 transition-colors"><input type="radio" name="q${index}" value="1" required class="mr-2 text-blue-600 focus:ring-blue-500"> 没有</label>
                <label class="flex items-center p-3 border rounded-lg cursor-pointer hover:bg-gray-100 transition-colors"><input type="radio" name="q${index}" value="2" class="mr-2 text-green-600 focus:ring-green-500"> 很轻</label>
                <label class="flex items-center p-3 border rounded-lg cursor-pointer hover:bg-gray-100 transition-colors"><input type="radio" name="q${index}" value="3" class="mr-2 text-yellow-600 focus:ring-yellow-500"> 中度</label>
                <label class="flex items-center p-3 border rounded-lg cursor-pointer hover:bg-gray-100 transition-colors"><input type="radio" name="q${index}" value="4" class="mr-2 text-orange-600 focus:ring-orange-500"> 偏重</label>
                <label class="flex items-center p-3 border rounded-lg cursor-pointer hover:bg-gray-100 transition-colors"><input type="radio" name="q${index}" value="5" class="mr-2 text-red-600 focus:ring-red-500"> 严重</label>
            </div>
        `;
        form.appendChild(questionDiv);
    });

    const factors = {
        '躯体化': { items: [1, 4, 12, 27, 40, 42, 48, 49, 52, 53, 56, 58], desc: "主要反映主观的身体不适感，如心血管、肠胃、呼吸系统不适及疼痛感。" },
        '强迫症状': { items: [3, 9, 10, 28, 38, 45, 46, 51, 55, 65], desc: "反映一些无意义的想法、冲动和行为，以及与之相关的认知障碍。" },
        '人际关系敏感': { items: [6, 21, 34, 36, 37, 41, 61, 69, 73], desc: "主要指在人际交往中的不自在感、自卑感，以及对他人评价的过度在意。" },
        '抑郁': { items: [5, 14, 15, 20, 22, 26, 29, 30, 31, 32, 54, 71, 79], desc: "反映与临床抑郁相关的思想、情感和行为，如情绪低落、丧失兴趣、无望感等。" },
        '焦虑': { items: [2, 17, 23, 33, 39, 57, 72, 78, 80, 86], desc: "反映与临床焦虑相关的精神症状和体验，如紧张、担忧、恐惧及相关的躯体症状。" },
        '敌对': { items: [11, 24, 63, 67, 74, 81], desc: "从思维、情感及行为三方面来反映敌对表现，如烦躁、争论、攻击性等。" },
        '恐怖': { items: [13, 25, 47, 50, 70, 75, 82], desc: "反映对特定物体、场所或社交情境的非理性恐惧。" },
        '偏执': { items: [8, 18, 43, 68, 76, 83], desc: "主要指猜疑、关系妄想、敌意等思维模式。" },
        '精神病性': { items: [7, 16, 35, 62, 77, 84, 85, 87, 88, 90], desc: "反映精神分裂样症状，如幻觉、思维混乱、被洞悉感等。" }
    };
    
    function getSummaryInterpretation(totalScore, meanScore, positiveItems) {
        let totalScoreInterp, meanScoreInterp, positiveItemsInterp;
        let totalScoreProgressColor, meanScoreProgressColor, positiveItemsProgressColor;

        // Total Score Logic
        if (totalScore < 160) { 
            totalScoreInterp = { text: "状态良好", color: "text-green-600" };
            totalScoreProgressColor = 'bg-green-500';
        } else if (totalScore <= 200) { 
            totalScoreInterp = { text: "轻度困扰", color: "text-yellow-600" };
            totalScoreProgressColor = 'bg-yellow-500';
        } else if (totalScore <= 250) { 
            totalScoreInterp = { text: "中度困扰", color: "text-orange-600" };
            totalScoreProgressColor = 'bg-orange-500';
        } else { 
            totalScoreInterp = { text: "严重困扰", color: "text-red-600" };
            totalScoreProgressColor = 'bg-red-500';
        }
        const totalScoreProgress = Math.min((totalScore / 300) * 100, 100);

        // Mean Score Logic
        if (meanScore < 1.5) { 
            meanScoreInterp = { text: "状态良好", color: "text-green-600" };
            meanScoreProgressColor = 'bg-green-500';
        } else if (meanScore < 2) { 
            meanScoreInterp = { text: "可能存在轻微症状", color: "text-yellow-600" };
            meanScoreProgressColor = 'bg-yellow-500';
        } else if (meanScore < 3) { 
            meanScoreInterp = { text: "存在明显症状", color: "text-orange-600" };
            meanScoreProgressColor = 'bg-orange-500';
        } else { 
            meanScoreInterp = { text: "症状较严重", color: "text-red-600" };
            meanScoreProgressColor = 'bg-red-500';
        }
        const meanScoreProgress = (meanScore / 5) * 100;

        // Positive Items Logic
        if (positiveItems < 43) { 
            positiveItemsInterp = { text: "状态良好", color: "text-green-600" };
            positiveItemsProgressColor = 'bg-green-500';
        } else if (positiveItems <= 55) { 
            positiveItemsInterp = { text: "存在一些症状", color: "text-yellow-600" };
            positiveItemsProgressColor = 'bg-yellow-500';
        } else if (positiveItems <= 70) { 
            positiveItemsInterp = { text: "症状项目较多", color: "text-orange-600" };
            positiveItemsProgressColor = 'bg-orange-500';
        } else { 
            positiveItemsInterp = { text: "症状项目很多", color: "text-red-600" };
            positiveItemsProgressColor = 'bg-red-500';
        }
        const positiveItemsProgress = (positiveItems / 90) * 100;

        return `
            <div class="bg-gray-50 p-4 rounded-lg border">
                <div class="flex justify-between items-center"> <span class="font-semibold text-gray-700">总分: ${totalScore}</span> <span class="font-bold text-lg ${totalScoreInterp.color}">${totalScoreInterp.text}</span> </div>
                <div class="w-full bg-gray-200 rounded-full h-2.5 my-2">
                    <div class="${totalScoreProgressColor} h-2.5 rounded-full" style="width: ${totalScoreProgress}%"></div>
                </div>
                <div class="grid grid-cols-4 text-center text-xs text-gray-500 border-b pb-2 mb-2">
                    <span>&lt;160<br>良好</span>
                    <span>160-200<br>轻度</span>
                    <span>201-250<br>中度</span>
                    <span>&gt;250<br>严重</span>
                </div>
                <div class="text-sm text-gray-600 space-y-2">
                    <p><strong>解读：</strong>总分反映了您感受到的总体痛苦程度和心理健康状况的严重性。分数越高，表明您可能正在经历更显著的心理困扰。</p>
                    <p><strong>建议：</strong>如果您的总分偏高（如超过160分），这是一个需要关注的信号。可以尝试记录每日情绪和压力来源，并优先保证充足的睡眠和均衡的饮食。高分（如超过250分）强烈建议寻求专业心理咨询。 </p>
                </div>
            </div>
            <div class="bg-gray-50 p-4 rounded-lg border">
                <div class="flex justify-between items-center"> <span class="font-semibold text-gray-700">总均分: ${meanScore.toFixed(3)}</span> <span class="font-bold text-lg ${meanScoreInterp.color}">${meanScoreInterp.text}</span> </div>
                <div class="w-full bg-gray-200 rounded-full h-2.5 my-2">
                    <div class="${meanScoreProgressColor} h-2.5 rounded-full" style="width: ${meanScoreProgress}%"></div>
                </div>
                <div class="grid grid-cols-4 text-center text-xs text-gray-500 border-b pb-2 mb-2">
                    <span>&lt;1.5<br>良好</span>
                    <span>1.5-2<br>轻微</span>
                    <span>2-3<br>明显</span>
                    <span>&gt;3<br>严重</span>
                </div>
                <div class="text-sm text-gray-600 space-y-2">
                    <p><strong>解读：</strong>总均分是评估症状严重程度的核心指标。它代表了您所有症状的平均强度。分数大于2分通常被认为是筛查阳性，意味着您的症状已达到需要关注的临床水平。</p>
                    <p><strong>建议：</strong>如果总均分大于2，请重点查看下方得分最高的几个因子，并参考其具体建议。这可以帮助您定位问题核心。同时，与信任的家人、朋友或专业人士沟通您的感受，是寻求支持的第一步。</p>
                </div>
            </div>
            <div class="bg-gray-50 p-4 rounded-lg border">
                <div class="flex justify-between items-center"> <span class="font-semibold text-gray-700">阳性项目数: ${positiveItems} / 90</span> <span class="font-bold text-lg ${positiveItemsInterp.color}">${positiveItemsInterp.text}</span> </div>
                <div class="w-full bg-gray-200 rounded-full h-2.5 my-2">
                    <div class="${positiveItemsProgressColor} h-2.5 rounded-full" style="width: ${positiveItemsProgress}%"></div>
                </div>
                <div class="grid grid-cols-4 text-center text-xs text-gray-500 border-b pb-2 mb-2">
                    <span>&lt;43<br>良好</span>
                    <span>43-55<br>一些</span>
                    <span>56-70<br>较多</span>
                    <span>&gt;70<br>很多</span>
                </div>
                <div class="text-sm text-gray-600 space-y-2">
                    <p><strong>解读：</strong>此项代表您报告感到“很轻”或以上程度症状的项目数量。阳性项目越多，说明您受困扰的范围越广泛，可能同时在情绪、思维、身体和人际关系等多个方面都面临挑战。</p>
                    <p><strong>建议：</strong>如果阳性项目数较多，不必感到不知所措。可以尝试从最困扰您的2-3个问题入手，而不是试图一次性解决所有问题。专注于小的、可实现的改变，例如每天进行10分钟的放松练习，或每周与一位朋友联系一次。</p>
                </div>
            </div>
        `;
    }

    function getFactorAdvice(factorName, score) {
        if (score < 2) { return "<p class='text-sm text-green-700 mt-2'>此项指标在正常范围内，状态良好。</p>"; }
        
        const baseAdvice = "<li class='mt-1'><strong>寻求专业帮助：</strong>如果这些困扰持续影响您的生活，请考虑与心理咨询师或医生交流。</li>";
        let specificAdvice = "";

        switch(factorName) {
            case '躯体化': specificAdvice = "<li><strong>关注身心连接：</strong>尝试正念冥想、深呼吸等放松练习，有助于缓解因紧张引起的身体不适。</li><li><strong>规律生活：</strong>保证充足的睡眠和均衡的营养，进行散步、瑜伽等温和运动。</li>"; break;
            case '强迫症状': specificAdvice = "<li><strong>延迟满足：</strong>当有强迫冲动时，尝试先延迟几分钟再行动，并逐渐延长这个时间。</li><li><strong>正念练习：</strong>学习观察脑海中的想法而不去评判或纠缠，让它们自然来去。</li>"; break;
            case '人际关系敏感': specificAdvice = "<li><strong>自我肯定：</strong>每天记录一件自己做得好的小事，练习自我欣赏。</li><li><strong>逐步社交：</strong>从与信任的家人朋友交流开始，逐步扩大舒适的社交范围。</li>"; break;
            case '抑郁': specificAdvice = "<li><strong>激活行为：</strong>即使没有心情，也坚持做一些简单的事情，如散步、听音乐或整理房间。</li><li><strong>保持联系：</strong>主动与能给您带来支持和积极感受的亲友联系。</li>"; break;
            case '焦虑': specificAdvice = "<li><strong>接地练习：</strong>当感到焦虑时，专注于当下的感官体验，例如感受脚踩在地上的感觉，或触摸一件物品的质地。</li><li><strong>限制信息：</strong>减少接触引起焦虑的新闻或信息，为自己设定“无忧虑时间”。</li>"; break;
            case '敌对': specificAdvice = "<li><strong>识别触发点：</strong>留意是什么情境或想法点燃了您的怒火。</li><li><strong>健康宣泄：</strong>通过运动、书写或向信任的人倾诉来表达愤怒，而不是采取攻击性行为。</li>"; break;
            case '恐怖': specificAdvice = "<li><strong>学习放松技巧：</strong>在感到恐惧前，练习深呼吸或肌肉放松法，以应对可能出现的恐慌。</li><li><strong>寻求专业指导：</strong>对于特定的恐惧，在专业人士指导下进行系统脱敏是有效的处理方式。</li>"; break;
            case '偏执': specificAdvice = "<li><strong>现实检验：</strong>当产生怀疑时，尝试寻找客观证据来支持或反驳您的想法。</li><li><strong>换位思考：</strong>尝试从他人的角度理解情况，可能会发现不同的解释。</li>"; break;
            case '精神病性': specificAdvice = "<li><strong>立即求助：</strong>此项分数较高是寻求专业帮助的强烈信号。请务必联系精神科医生或心理健康机构。</li><li><strong>稳定环境：</strong>保持规律的作息，确保自己处于一个安全、有支持的环境中。</li>"; break;
        }
        return `<ul class='list-disc list-inside text-sm text-gray-700 mt-2 space-y-1'>${specificAdvice}${baseAdvice}</ul>`;
    }

    function renderResultsChart(labels, data) {
        const ctx = document.getElementById('resultsChart').getContext('2d');
        if (myChart) { myChart.destroy(); }

        myChart = new Chart(ctx, {
            type: 'radar',
            data: {
                labels: labels,
                datasets: [{
                    label: '因子分',
                    data: data,
                    backgroundColor: 'rgba(59, 130, 246, 0.2)',
                    borderColor: 'rgba(59, 130, 246, 1)',
                    borderWidth: 2,
                    pointBackgroundColor: 'rgba(59, 130, 246, 1)',
                    pointBorderColor: '#fff',
                    pointHoverBackgroundColor: '#fff',
                    pointHoverBorderColor: 'rgba(59, 130, 246, 1)'
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: true,
                scales: {
                    r: {
                        angleLines: { color: 'rgba(0, 0, 0, 0.1)' },
                        grid: { color: 'rgba(0, 0, 0, 0.1)' },
                        pointLabels: { font: { size: 12 } },
                        suggestedMin: 0,
                        suggestedMax: 5,
                        ticks: { stepSize: 1, backdropColor: 'rgba(255, 255, 255, 0.75)', color: '#6b7280' }
                    }
                },
                plugins: {
                    legend: { position: 'top' },
                    tooltip: {
                        callbacks: {
                            label: function(context) {
                                let label = context.dataset.label || '';
                                if (label) { label += ': '; }
                                if (context.parsed.r !== null) { label += context.parsed.r.toFixed(3); }
                                return label;
                            }
                        }
                    }
                }
            }
        });
    }

    function calculateResults() {
        const formData = new FormData(form);
        const answers = [];
        let completed = true;
        for (let i = 0; i < questions.length; i++) {
            const answer = formData.get(`q${i}`);
            if (answer === null) { completed = false; break; }
            answers.push(parseInt(answer));
        }

        const alertBox = document.getElementById('alert-message');
        if (!completed) {
            alertBox.classList.remove('hidden');
            window.scrollTo({ top: 0, behavior: 'smooth' });
            return;
        } else {
            alertBox.classList.add('hidden');
        }

        let totalScore = answers.reduce((sum, a) => sum + a, 0);
        let totalMeanScore = totalScore / 90;
        let positiveItems = answers.filter(a => a >= 2).length;

        document.getElementById('summary').innerHTML = getSummaryInterpretation(totalScore, totalMeanScore, positiveItems);

        const factorScoresDiv = document.getElementById('factor-scores');
        factorScoresDiv.innerHTML = ''; 

        const factorLabels = [];
        const factorDataPoints = [];

        for (const factorName in factors) {
            const factorData = factors[factorName];
            let factorSum = 0;
            factorData.items.forEach(index => { factorSum += answers[index - 1]; });
            const factorMean = factorSum / factorData.items.length;
            
            factorLabels.push(factorName);
            factorDataPoints.push(factorMean);

            const progressWidth = (factorMean / 5) * 100;
            let progressColor = 'bg-green-500';
            if (factorMean >= 4) { progressColor = 'bg-red-500'; } 
            else if (factorMean >= 3) { progressColor = 'bg-orange-500'; } 
            else if (factorMean >= 2) { progressColor = 'bg-yellow-500'; }

            const adviceHTML = getFactorAdvice(factorName, factorMean);
            
            const factorDiv = document.createElement('div');
            factorDiv.className = 'factor-item bg-gray-50 p-4 rounded-lg border border-gray-200 flex flex-col';
            factorDiv.innerHTML = `
                <div class="flex-grow">
                    <div class="flex justify-between items-center mb-2">
                        <h4 class="font-bold text-gray-800">${factorName}</h4>
                        <span class="font-bold text-lg text-blue-600">${factorMean.toFixed(3)}</span>
                    </div>
                    
                    <div class="w-full bg-gray-200 rounded-full h-2.5 mb-3">
                        <div class="${progressColor} h-2.5 rounded-full" style="width: ${progressWidth}%"></div>
                    </div>

                    <p class="text-sm text-gray-600 mb-3">${factorData.desc}</p>
                </div>
                <div class="mt-auto">
                    <h5 class="font-semibold text-sm text-gray-800 border-t pt-2 mt-2">参考建议</h5>
                    ${adviceHTML}
                </div>
            `;
            factorScoresDiv.appendChild(factorDiv);
        }

        renderResultsChart(factorLabels, factorDataPoints);

        const resultsDiv = document.getElementById('results');
        resultsDiv.classList.remove('hidden');
        resultsDiv.scrollIntoView({ behavior: 'smooth' });
    }
</script>

</body>
</html>
